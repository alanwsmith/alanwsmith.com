---
category: APIs
date: '2020-10-31T00:00:00'
id: 20WSidXeK7aL
slug: /stream-notes-2020-10-31
tags:
- Live Coding
- Python
title: 'Pulling Search Results From NASA''s Images API (With Testing!) - Stream Notes
  for October 31, 2020 #LiveCoding'
type: post
---

`youtube: https://www.youtube.com/watch?v=S1fyhO76BW0`

### Notes

Spent the stream working on my process to pull videos from the [NASA Images API](https://images.nasa.gov/docs/images.nasa.gov_api_docs.pdf). I could have done a quick and dirty script, but my current practice is to do everything with [Test Driven Development](https://en.wikipedia.org/wiki/Test-driven_development). This was a perfect thing to practice on. It's small and straightforward. At the start, I wasn't sure how to test it. That's a code smell. After a bunch of kicking around, I got it setup nicely. 

This is the general pattern:

```python{numberLines: true}
#!/usr/bin/env python3

from random import randint

class LoopRunner():
    def __init__(self):
        self.counter = 1
    
    def run_until_you_see_2(self):
        random_num = randint(1, 10)
        print(f'Run: {self.counter} Got: {random_num}')
        if random_num != 2:
            self.counter = self.counter + 1
    
    def run_loop(self):
        killer = 0
        while killer != self.counter:
            self.run_until_you_see_2()
            killer += 1
            
if __name__ == '__main__':
    tr = LoopRunner()
    tr.run_loop()
```

The `while` loop checks against an instance variable to see if it should keep going. It calls an external method if it should. That method updates the instance variable. In most examples, you see a `True/False` flag being set. That would take another step in this case. I like it referencing the counter directly. 

### Links From The Stream


- [(Please) Stop Using Unsafe Characters in URLs | Perishable Press](https://perishablepress.com/stop-using-unsafe-characters-in-urls/)
- [20 Python libraries you aren’t using (but should) – O’Reilly](https://www.oreilly.com/content/20-python-libraries-you-arent-using-but-should/)
- [3.1. If Statements — Hands-on Python Tutorial for Python 3](http://anh.cs.luc.edu/handsonPythonTutorial/ifstatements.html)
- [A common way of managing configurations for multiple environments (and...](https://itnext.io/a-standard-way-of-managing-configurations-for-multiple-environments-and-clouds-ee8d54703efc)
- [Beginning Java - Unit 4 Looping - While](https://mathbits.com/MathBits/Java/Looping/While.htm)
- [Best way to handle dev/test/prod variables in Python? - Software Engineering...](https://softwareengineering.stackexchange.com/questions/342788/best-way-to-handle-dev-test-prod-variables-in-python/342790)
- [Do-while Loops](https://www.cis.upenn.edu/~matuszek/General/JavaSyntax/do-while-loops.html)
- [Google Search: best way to handle configs in dev vs prod](https://www.google.com/search?client=safari&rls=en&q=best+way+to+handle+configs+in+dev+vs+prod&ie=UTF-8&oe=UTF-8)
- [Google Search: how do you test while loops](https://www.google.com/search?client=safari&rls=en&q=how+do+you+test+while+loops&ie=UTF-8&oe=UTF-8)
- [Google Search: py if in dict](https://www.google.com/search?client=safari&rls=en&q=py+if+in+dict&ie=UTF-8&oe=UTF-8)
- [Google Search: py md5](https://www.google.com/search?client=safari&rls=en&q=py+md5&ie=UTF-8&oe=UTF-8)
- [Google Search: py tldextract](https://www.google.com/search?client=safari&rls=en&q=py+tldextract&ie=UTF-8&oe=UTF-8)
- [Google Search: python domain processing library name](https://www.google.com/search?newwindow=1&client=safari&rls=en&ei=nSieX4nnIMjJ5gKAq6mACA&q=python+domain+processing+library+name&oq=python+domain+processing+library+name&gs_lcp=CgZwc3ktYWIQAzoECAAQR1DSWlilZmD3Z2gBcAN4AIABVogB9gSSAQE4mAEAoAEBqgEHZ3dzLXdpesgBCMABAQ&sclient=psy-ab&ved=0ahUKEwjJqff5sODsAhXIpFkKHYBVCoAQ4dUDCAw&uact=5)
- [Google Search: python encode url spaces in name](https://www.google.com/search?client=safari&rls=en&q=python+encode+url+spaces+in+name&ie=UTF-8&oe=UTF-8)
- [Google Search: python if](https://www.google.com/search?client=safari&rls=en&q=python+if&ie=UTF-8&oe=UTF-8)
- [Google Search: python make a url safe with spaces](https://www.google.com/search?client=safari&rls=en&q=python+make+a+url+safe+with+spaces&ie=UTF-8&oe=UTF-8)
- [Google Search: python prevent making instance variables](https://www.google.com/search?client=safari&rls=en&q=python+prevent+making+instance+variables&ie=UTF-8&oe=UTF-8)
- [Google Search: python sha256](https://www.google.com/search?client=safari&rls=en&q=python+sha256&ie=UTF-8&oe=UTF-8)
- [Google Search: python show error](https://www.google.com/search?client=safari&rls=en&q=python+show+error&ie=UTF-8&oe=UTF-8)
- [Google Search: python sleep](https://www.google.com/search?client=safari&rls=en&q=python+sleep&ie=UTF-8&oe=UTF-8)
- [Google Search: python tuple](https://www.google.com/search?client=safari&rls=en&q=python+tuple&ie=UTF-8&oe=UTF-8)
- [Google Search: python urlencode](https://www.google.com/search?client=safari&rls=en&q=python+urlencode&ie=UTF-8&oe=UTF-8)
- [Google Search: unittest while loop](https://www.google.com/search?client=safari&rls=en&q=unittest+while+loop&ie=UTF-8&oe=UTF-8)
- [How to encode URLs in Python | URLEncoder](https://www.urlencoder.io/python/)
- [How to Get Domain Name Information in Python - Python Code](https://www.thepythoncode.com/article/extracting-domain-name-information-in-python)
- [images.nasa.gov_api_docs.pdf](https://images.nasa.gov/docs/images.nasa.gov_api_docs.pdf)
- [Lab 9 - While loops and unit testing — Runestone Interactive Overview](http://web.cs.iastate.edu/~smkautz/cs127f16/labs/lab9/)
- [Object Oriented Programming in Pyth: Class and Instance Variables | DigitalOcean](https://www.digitalocean.com/community/tutorials/understanding-class-and-instance-variables-in-python-3)
- [Programming - While Loop](https://www.cs.utah.edu/~germain/PPS/Topics/while_loops.html)
- [PyPI: tldextract](https://pypi.org/project/tldextract/)
- [Python - Tuples - Tutorialspoint](https://www.tutorialspoint.com/python/python_tuples.htm)
- [Python 3.3.7 Documentation: 21.6. urllib.request — Extensible library for opening URLs](https://docs.python.org/3.3/library/urllib.request.html#urllib-examples)
- [Python 3.3.7 Documentation: 21.8. urllib.parse — Parse URLs into components](https://docs.python.org/3.3/library/urllib.parse.html?highlight=urlencode#urllib.parse.urldefrag)
- [Python 3.9.0 Documentation: 4. More Control Flow Tools](https://docs.python.org/3/tutorial/controlflow.html)
- [Python 3.9.0 Documentation: 8. Compound statements](https://docs.python.org/3/reference/compound_stmts.html)
- [Python 3.9.0 Documentation: 8. Errors and Exceptions](https://docs.python.org/3/tutorial/errors.html)
- [Python 3.9.0 Documentation: collections — Container datatypes](https://docs.python.org/3/library/collections.html#collections.namedtuple)
- [Python 3.9.0 Documentation: Glossary](https://docs.python.org/3/glossary.html#term-named-tuple)
- [Python 3.9.0 Documentation: hashlib — Secure hashes and message digests](https://docs.python.org/3/library/hashlib.html)
- [Python 3.9.0 Documentation: time — Time access and conversions](https://docs.python.org/3/library/time.html#time.sleep)
- [Python 3.9.0 Documentation: Tuple Objects](https://docs.python.org/3/c-api/tuple.html)
- [Python 3.9.0 Documentation: urllib.parse — Parse URLs into components](https://docs.python.org/3/library/urllib.parse.html)
- [Python Tuple (With Examples)](https://www.programiz.com/python-programming/tuple)
- [qgis - Inserting %20 instead of a space as a string - Geographic Information...](https://gis.stackexchange.com/questions/255215/inserting-20-instead-of-a-space-as-a-string)
- [Results for "the" | NASA Image and Video Library](https://images.nasa.gov/search-results?q=the&page=2&media=video&yearStart=1920&yearEnd=2020)
- [Stack Overflow: Check if a given key already exists in a dictionary](https://stackoverflow.com/questions/1602934/check-if-a-given-key-already-exists-in-a-dictionary)
- [Stack Overflow: How to formally insert URL space (%20) using Python?](https://stackoverflow.com/questions/32762219/how-to-formally-insert-url-space-20-using-python)
- [Stack Overflow: How to get MD5 sum of a string using python?](https://stackoverflow.com/questions/5297448/how-to-get-md5-sum-of-a-string-using-python)
- [Stack Overflow: Prevent altering instance variable](https://stackoverflow.com/questions/43408152/prevent-altering-instance-variable)