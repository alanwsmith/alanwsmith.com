---
blurb: ''
categories:
  - NextJS
date: '2021-10-02T19:41:01'
id: 20eOW9oTZ1Pw
scrubbed_2021: false
status: unpublished
type: post
title: nextjs
slug: 20eOW9oTZ1Pw--nextjs
---

Using this for meilisearch with nextjs

```bash
npm i @meilisearch/instant-meilisearch
npm i react-instantsearch-dom 
```

---

```javascript
import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom'
import { instantMeiliSearch } from '@meilisearch/instant-meilisearch'

const searchClient = instantMeiliSearch(
  process.env.NEXT_PUBLIC_MEILISEARCH_DOMAIN,
  process.env.NEXT_PUBLIC_MEILISEARCH_PUBLIC_KEY
)

const Hit = ({ hit }) => <div>{hit.displayTitle}</div>

export default function Searcher() {
  return (
    <>
      <h3>Search</h3>
      <InstantSearch indexName="songs" searchClient={searchClient}>
        <SearchBox autoFocus />
        <Hits hitComponent={Hit} />
      </InstantSearch>
    </>
  )
}
```

---

This is how to do it where it doesn't search on an empty string

```javascript
import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom'
import { instantMeiliSearch } from '@meilisearch/instant-meilisearch'

const meiliClient = instantMeiliSearch(
  process.env.NEXT_PUBLIC_MEILISEARCH_DOMAIN,
  process.env.NEXT_PUBLIC_MEILISEARCH_PUBLIC_KEY
)

const searchClient = {
  ...meiliClient,
  search(requests) {
    if (requests.every(({ params }) => !params.query)) {
      return Promise.resolve({
        results: requests.map(() => ({
          hits: [],
          nbHits: 0,
          nbPages: 0,
          page: 0,
          processingTimeMS: 0,
        })),
      })
    }

    return meiliClient.search(requests)
  },
}

const Hit = ({ hit }) => <div>{hit.displayTitle}</div>

export default function Searcher() {
  return (
    <>
      <h3>Search</h3>
      <InstantSearch indexName="songs" searchClient={searchClient}>
        <SearchBox autoFocus />
        <Hits hitComponent={Hit} />
      </InstantSearch>
    </>
  )
}
```
