---
blurb: ''
categories:
  - Miscellaneous
date: '2021-06-18T15:44:57'
id: 20eOB6fv3iJl
scrubbed_2021: false
status: unpublished
type: post
title: Setup WinClosed Autocommand For A Plugin
slug: 20eOB6fv3iJl--setup-winclosed-autocommand-for-a-plugin
---

```lua
-- This is how to attach a WinClosed autocommand to
-- a specific buffer.

local function window_closed_action()
    print("Caught WinClosed Autocommand")
end

local function winclosed_example()
    buffer1 = vim.api.nvim_create_buf(false, true)
    window1 = vim.api.nvim_open_win(buffer1, true, {
            style="minimal", relative='editor',
            row=3, col=3, width=10, height=6, border='single'
        }
    )
    vim.api.nvim_command(
        'au WinClosed <buffer='..buffer1..'> lua require"winclosed_example".window_closed_action()'
    )
end

return {
    window_closed_action = window_closed_action,
    winclosed_example = winclosed_example
}
```
