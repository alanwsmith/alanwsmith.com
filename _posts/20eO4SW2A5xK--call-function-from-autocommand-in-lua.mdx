---
blurb: ''
categories:
  - Miscellaneous
date: '2021-06-06T16:25:24'
id: 20eO4SW2A5xK
scrubbed_2021: false
status: unpublished
type: post
title: Call Function From Autocommand in Lua
slug: 20eO4SW2A5xK--call-function-from-autocommand-in-lua
---

This is how to setup an autocommand that calls another function from inside a plugin


### File: ~/.config/nvim/lua/example_autocommand.lua


    local function update_status()
        vim.api.nvim_command(':lua print("Update Triggered")')
        -- This should work too
        -- print("direct update")
    end
    
    local function example_autocommand()
        vim.api.nvim_command('au CursorMoved <buffer> lua require"example_autocommand".update_status()')
    end
    
    return {
        example_autocommand = example_autocommand,
        update_status = update_status,
    }



### File: ~/.config/nvim/plugin/example_autocommand.vim


    if exists('g:loaded_example_autocommand') | finish | endif
    
    let s:save_cpo = &cpo
    set cpo&vim
    
    command! ExampleAutocommand lua require'example_autocommand'.example_autocommand()
    
    let &cpo = s:save_cpo
    unlet s:save_cpo
    
    let g:loaded_example_autocommand = 1
